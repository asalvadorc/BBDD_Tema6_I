<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://asalvadorc.github.io/BBDD_POSTGRESQL/BD_PostgreSQL_DQL/10_la_clusula_limit__offset/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>10. La clàusula LIMIT .. OFFSET - BD - Bases de Dades</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../css/extra.css" rel="stylesheet" />
        <link href="../../img/favicon.ico" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "10. La cl\u00e0usula LIMIT .. OFFSET";
        var mkdocs_page_input_path = "BD_PostgreSQL_DQL/10_la_clusula_limit__offset.md";
        var mkdocs_page_url = "/BBDD_POSTGRESQL/BD_PostgreSQL_DQL/10_la_clusula_limit__offset/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../..">
          <img src="../../assets/logocaminas.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">SQL - POSTGRES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../objectius_i_coneixements_previs/">Objectius i Coneixements previs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../1_introducci/">1. Introducció</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../2_client_dbeaver_installaci_i_confiuraci/">2. DBeaver</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../3_dades_dels_exemples_i_els_exercicis/">3 Dades dels exemples i els exercicis</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >4. Operadors i Funcions de Postgres</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../6_operadors/">4.1. Operadors</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../7_funcions/">4.2. Funcions</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DQL Consultes (part I)</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../1_la_consulta_select/">1. La consulta SELECT</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../2_consulta_bsica/">2. Consulta bàsica</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../3_lies_en_les_columnes/">3. Àlies en les columnes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../4_la_clusula_where/">4. La clàusula WHERE</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../5_funcions_dagregat/">5. Funcions d'agregat</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../6_la_clusula_group_by/">6. La clàusula GROUP BY</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../7_la_clusula_having/">7. La clàusula HAVING</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../8_la_clusula_order_by/">8. La clàusula ORDER BY</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../9_el_predicat_distinct/">9. El predicat DISTINCT</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">10. La clàusula LIMIT .. OFFSET</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#exercicis">Exercicis</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../11_consulta_de_creaci_de_taules/">11. Consulta de creació de taules</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../12_ordre_amb_qu_sexecuta_una_sentncia_sql/">12. Ordre amb que s'executa una sentència SQL</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../exercicis_de_tot_el_tema_amb_els_resultats/">Exercicis amb els resultats (part I)</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DQL Consultes avançades (part II)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../BD_PostgreSQL_DQL_Avancat/21_introducci/">1. Introducció</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../BD_PostgreSQL_DQL_Avancat/22_combinacions_de_taules/">2. Combinacions de taules</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../BD_PostgreSQL_DQL_Avancat/23_subconsultes/">3. Subconsultes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../BD_PostgreSQL_DQL_Avancat/24_consultes_doperacions_de_conjunts/">4. Consultes d'operacions de conjunts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../BD_PostgreSQL_DQL_Avancat/exercicis_de_tot_el_tema_amb_els_resultats/">Exercicis amb els resultats (part II)</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">BD - Bases de Dades</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">DQL Consultes (part I)</li>
      <li class="breadcrumb-item active">10. La clàusula LIMIT .. OFFSET</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="10-la-clausula-limit-offset">10. La clàusula LIMIT .. OFFSET</h1>
<p>Per mig de la clàusula <strong>LIMIT - OFFSET</strong> podrem fer que no apareguen totes
les files que torna la sentència, sinó unes quantes.</p>
<ul>
<li><strong>LIMIT número</strong> : especificarem quantes files volem que es tornen</li>
<li><strong>OFFSET número</strong> : especificarem a partir de quina posició volem que es tornen les files</li>
</ul>
<p>Si no posem la part del OFFSET, apareixeran les primeres, i si especifiquem
OFFSET, se saltaran les primeres, tantes com s'indica en OFFSET. Per a que
realment tinga sentit aquesta clàusula, és conveninet ordenar la informació,
ja que al dir les primeres ja s'està assumint que seran les primeres respecte
algun ordre. Així, per exemple ens podrem plantejar traure coses com les 10
poblacions més altes, o les més habitades.</p>
<p>L'ordre implícit que acabem de comentar s'haurà de fer per mig de la clàusula
ORDER BY. Així, si volem traure els clients més joves haurem d'ordenar per la
data de naixement en ordre descendent, per a després traure els primenrs. Per
tant és molt difícil veure una clàusula LIMIT si no tenim una clàusula ORDER
BY.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>En el SQL d'Access no existeix la clàusula LIMIT. Per a fer coses similar
disposa del predicat <b>TOP</b> , que es posa immediatament després del SELECT,
però sempre traurà les primeres, no té possibilitat d'OFFSET.</p>
</div>
<p><strong><u>Sintaxi</u></strong>
<div class="highlight"><pre><span></span><code>SELECT &lt;columnes&gt;  
  FROM &lt;taules&gt;  
  [LIMIT _n_] [OFFSET _m_]
</code></pre></div>
El número <em><strong>n</strong></em> ha de ser un enter, i se seleccionaran únicament les <em><strong>n</strong></em>
primeres files (les de dalt). En cas de posat OFFSET se saltaran  <em><strong>m</strong></em>
files. En cas de no posar <strong>LIMIT</strong> , se saltaran _<strong>m</strong> _files i es trauran
totes les altres fins el final.</p>
<p>Per exemple, si volem traure les 10 poblacions més altes, haurem d'agafar les
10 primeres, ordenant per altura en forma descendent:
<div class="highlight"><pre><span></span><code>SELECT nom , altura  
  FROM POBLACIONS  
  ORDER BY altura DESC  
  LIMIT 10
</code></pre></div>
L'exemple anterior sembla correcte, però no funciona del tot bé perquè amb les
dades que tenim, hi ha 3 poblacions que no tenen altura, i el valor nul el
posa al final de tots els altres valors, en ordre ascendent, i per tant al
principi en ordre descendent.</p>
<p>Ho podem arreglar senzillament saltant les 3 primeres (que són les del nul)
<div class="highlight"><pre><span></span><code>SELECT nom , altura  
  FROM POBLACIONS  
  ORDER BY altura DESC  
  LIMIT 10 OFFSET 3
</code></pre></div>
Encara que sembla millor llevar les d'altura nula, així no estem obligats a
saber quantes poblacions amb altura nula hi ha
<div class="highlight"><pre><span></span><code>SELECT nom , altura  
  FROM POBLACIONS  
  WHERE altura IS NOT NULL  
  ORDER BY altura DESC  
  LIMIT 10
</code></pre></div>
Si vulguérem traure totes les poblacions i altures, excepte les que tenen nul,
i sabem que aquestes en són 3, podem posar OFFSET sense LIMIT, per a saltar
les 3 primeres, i traure-les totes fins el final
<div class="highlight"><pre><span></span><code>SELECT nom , altura  
  FROM POBLACIONS  
  ORDER BY altura DESC  
  OFFSET 3
</code></pre></div>
<strong><u>Exemples</u></strong></p>
<p>1) Traure les 5 poblacions més poblades
<div class="highlight"><pre><span></span><code>SELECT nom , poblacio  
  FROM POBLACIONS  
  ORDER BY poblacio DESC  
  LIMIT 5
</code></pre></div>
  2) Traure les 4 comarques amb més pobles.
<div class="highlight"><pre><span></span><code>SELECT nom_c , COUNT(*)  
  FROM POBLACIONS  
  GROUP BY nom_c  
  ORDER BY 2 DESC  
  LIMIT 4
</code></pre></div>
  3) Traure les 10 poblacions amb més instituts, saltant-nos les 3 primeres.
<div class="highlight"><pre><span></span><code>SELECT cod_m , COUNT(*)  
  FROM INSTITUTS  
  GROUP BY cod_m  
  ORDER BY 2 DESC  
  LIMIT 10 OFFSET 3
</code></pre></div></p>
<h2 id="exercicis"><img alt="✏️" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/270f.png" title=":pencil2:" /> Exercicis</h2>
<p><strong>Ex_44</strong> Traure tota la informació dels dos articles més cars.</p>
<p><strong>Ex_45</strong> Traure el codi de les tres ciutats amb més clients</p>
<p><strong>Ex_46</strong> Traure el venedor que ha venut menys factures  </p>
<p><strong>Ex_47</strong> Traure les tres factures més cares (sense comptar els descomptes)</p>
<p><strong>Ex_48</strong> Modificar l'anterior per a traure totes les factures, excepte les 3
més cares.</p>
<p>Llicenciat sota la  <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Llicència Creative Commons Reconeixement NoComercial
CompartirIgual 3.0</a></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../9_el_predicat_distinct/" class="btn btn-neutral float-left" title="9. El predicat DISTINCT"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../11_consulta_de_creaci_de_taules/" class="btn btn-neutral float-right" title="11. Consulta de creació de taules">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../9_el_predicat_distinct/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../11_consulta_de_creaci_de_taules/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
